<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head><meta charset="UTF-8"><title>Vehículo</title></head>
<body>

<h1 th:text="${mode == 'edit'} ? 'Editar vehículo' : 'Nuevo vehículo'"></h1>

<form th:action="${mode == 'edit'} ? @{/cliente/vehiculos/{id}(id=${vehicle.id})} : @{/cliente/vehiculos}"
      th:object="${vehicle}" method="post">

  <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

  <div>
    <label>Matrícula</label>
    <input type="text" th:field="*{matricula}" maxlength="12">
    <div th:if="${#fields.hasErrors('matricula')}" th:errors="*{matricula}" style="color:red"></div>
  </div>

  <div>
    <label>Marca</label>
    <input type="text" th:field="*{marca}" maxlength="60">
    <div th:if="${#fields.hasErrors('marca')}" th:errors="*{marca}" style="color:red"></div>
  </div>

  <div>
    <label>Modelo</label>
    <input type="text" th:field="*{modelo}" maxlength="60">
    <div th:if="${#fields.hasErrors('modelo')}" th:errors="*{modelo}" style="color:red"></div>
  </div>

  <div>
    <label>Año</label>
    <input type="number" th:field="*{anio}" min="1900" max="2100">
    <div th:if="${#fields.hasErrors('anio')}" th:errors="*{anio}" style="color:red"></div>
  </div>

  <div>
    <label>Combustible</label>
    <input type="text" th:field="*{combustible}" maxlength="20">
    <div th:if="${#fields.hasErrors('combustible')}" th:errors="*{combustible}" style="color:red"></div>
  </div>

  <div>
    <label>VIN</label>
    <input type="text" th:field="*{vin}" maxlength="20" placeholder="Opcional (20 caracteres)">
    <div th:if="${#fields.hasErrors('vin')}" th:errors="*{vin}" style="color:red"></div>
  </div>

  <div>
    <label>Notas</label>
    <textarea th:field="*{notas}"></textarea>
    <div th:if="${#fields.hasErrors('notas')}" th:errors="*{notas}" style="color:red"></div>
  </div>

  <button type="submit">Guardar</button>
  <a th:href="@{/cliente/vehiculos}">Cancelar</a>
</form>

</body>
</html>
